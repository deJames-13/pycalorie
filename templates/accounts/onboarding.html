{% extends 'layouts/base.html' %}
{% load static %}

{% block title %}Complete Your Profile - PyCalorie{% endblock %}

{% block content %}
<main>
    <section class="vh-lg-100 mt-5 mt-lg-0 bg-soft d-flex align-items-center">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12 d-flex align-items-center justify-content-center">
                    <div class="bg-white shadow border-0 rounded border-light p-4 p-lg-5 w-100 fmxw-700">
                        <div class="text-center text-md-center mb-4 mt-md-0">
                            <h1 class="mb-0 h3">Welcome to PyCalorie! üéâ</h1>
                            <p class="text-muted">Let's set up your profile to calculate your daily calorie goals</p>
                        </div>
                        
                        <form method="post" class="mt-4">
                            {% csrf_token %}
                            
                            <!-- Step 1: Biometrics -->
                            <div class="mb-4">
                                <h5 class="text-primary">üìä Your Biometrics</h5>
                                <p class="small text-muted">We need this information to calculate your personalized calorie goals.</p>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="weight_kg" class="form-label">Weight (kg) *</label>
                                    <input type="number" step="0.1" class="form-control" id="weight_kg" name="weight_kg" 
                                           value="{{ profile.weight_kg|default:'' }}" required
                                           placeholder="e.g., 70.5">
                                    <small class="text-muted">Your current weight</small>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="height_cm" class="form-label">Height (cm) *</label>
                                    <input type="number" step="0.1" class="form-control" id="height_cm" name="height_cm" 
                                           value="{{ profile.height_cm|default:'' }}" required
                                           placeholder="e.g., 170">
                                    <small class="text-muted">Your height in centimeters</small>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="date_of_birth" class="form-label">Date of Birth *</label>
                                    <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" 
                                           value="{{ profile.date_of_birth|date:'Y-m-d' }}" required>
                                    <small class="text-muted">We calculate your age for TDEE</small>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label for="gender" class="form-label">Gender *</label>
                                    <select class="form-select" id="gender" name="gender" required>
                                        <option value="">Select gender</option>
                                        <option value="M" {% if profile.gender == 'M' %}selected{% endif %}>Male</option>
                                        <option value="F" {% if profile.gender == 'F' %}selected{% endif %}>Female</option>
                                        <option value="O" {% if profile.gender == 'O' %}selected{% endif %}>Other</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Step 2: Activity & Goals -->
                            <div class="mb-4 mt-4">
                                <h5 class="text-primary">üèÉ Activity Level & Goals</h5>
                                <p class="small text-muted">Tell us about your lifestyle to personalize your experience.</p>
                            </div>
                            
                            <div class="mb-3">
                                <label for="activity_level" class="form-label">Activity Level *</label>
                                <select class="form-select" id="activity_level" name="activity_level" required>
                                    <option value="">Select your activity level</option>
                                    <option value="sedentary" {% if profile.activity_level == 'sedentary' %}selected{% endif %}>
                                        Sedentary - Little or no exercise
                                    </option>
                                    <option value="light" {% if profile.activity_level == 'light' %}selected{% endif %}>
                                        Light - Exercise 1-3 days/week
                                    </option>
                                    <option value="moderate" {% if profile.activity_level == 'moderate' %}selected{% endif %}>
                                        Moderate - Exercise 3-5 days/week
                                    </option>
                                    <option value="active" {% if profile.activity_level == 'active' %}selected{% endif %}>
                                        Active - Exercise 6-7 days/week
                                    </option>
                                    <option value="very_active" {% if profile.activity_level == 'very_active' %}selected{% endif %}>
                                        Very Active - Hard exercise 2x/day
                                    </option>
                                </select>
                            </div>
                            
                            <div class="mb-4">
                                <label for="health_goal" class="form-label">Health Goal *</label>
                                <select class="form-select" id="health_goal" name="health_goal" required>
                                    <option value="">Select your main goal</option>
                                    <option value="weight_loss" {% if profile.health_goal == 'weight_loss' %}selected{% endif %}>
                                        üî• Lose Weight
                                    </option>
                                    <option value="weight_gain" {% if profile.health_goal == 'weight_gain' %}selected{% endif %}>
                                        üìà Gain Weight
                                    </option>
                                    <option value="maintain" {% if profile.health_goal == 'maintain' %}selected{% endif %}>
                                        ‚öñÔ∏è Maintain Weight
                                    </option>
                                    <option value="muscle_gain" {% if profile.health_goal == 'muscle_gain' %}selected{% endif %}>
                                        üí™ Build Muscle
                                    </option>
                                    <option value="general_health" {% if profile.health_goal == 'general_health' %}selected{% endif %}>
                                        ‚ù§Ô∏è General Health
                                    </option>
                                </select>
                            </div>
                            
                            <!-- Info Box -->
                            <div class="alert alert-info mb-4">
                                <h6 class="alert-heading">‚ÑπÔ∏è How it works:</h6>
                                <p class="mb-0 small">
                                    We'll use the <strong>Mifflin-St Jeor equation</strong> to calculate your 
                                    <strong>TDEE</strong> (Total Daily Energy Expenditure) and adjust it based on your goal:
                                </p>
                                <ul class="small mb-0 mt-2">
                                    <li>Weight Loss: -500 cal/day (lose ~0.5kg/week)</li>
                                    <li>Muscle Gain: +500 cal/day</li>
                                    <li>Weight Gain: +300 cal/day</li>
                                    <li>Maintain: Your TDEE (no adjustment)</li>
                                </ul>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    Calculate My Goals & Start Tracking üöÄ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
{% endblock %}
