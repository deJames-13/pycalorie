{% load static %}

<header class="header-global">
    <nav id="navbar-main" aria-label="Primary navigation" 
         class="navbar navbar-main navbar-expand-lg navbar-theme-primary headroom {% if request.user.is_authenticated %}navbar-light{% else %}navbar-dark{% endif %} navbar-theme-secondary">
        <div class="container position-relative">
            <a class="navbar-brand me-lg-5" href="/">
                <span class="h4 mb-0 text-white fw-bold">ðŸ”¥ PyCalorie</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar_global" 
                    aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="navbar-collapse collapse me-auto" id="navbar_global">
                <div class="navbar-collapse-header">
                    <div class="row">
                        <div class="col-6 collapse-brand">
                            <a href="/" class="h5 mb-0 text-primary fw-bold">ðŸ”¥ PyCalorie</a>
                        </div>
                        <div class="col-6 collapse-close">
                            <a href="#navbar_global" class="fas fa-times" data-bs-toggle="collapse" 
                               data-bs-target="#navbar_global" aria-controls="navbar_global" 
                               aria-expanded="false" title="close" aria-label="Toggle navigation"></a>
                        </div>
                    </div>
                </div>
                
                <ul class="navbar-nav navbar-nav-hover align-items-lg-center">
                    {% if request.user.is_authenticated %}
                        <!-- Authenticated User Menu -->
                        <li class="nav-item">
                            <a href="{% url 'dashboard:index' %}" class="nav-link">
                                <span class="fas fa-chart-line me-1"></span> Dashboard
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                <span class="fas fa-utensils me-1"></span> Track Food
                                <span class="fas fa-angle-down nav-link-arrow ms-1"></span>
                            </a>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="{% url 'dashboard:food_log' %}">
                                    <span class="fas fa-plus-circle me-2"></span> Log Food
                                </a>
                                <a class="dropdown-item" href="{% url 'dashboard:calorie_predict' %}">
                                    <span class="fas fa-brain me-2"></span> AI Prediction (Text)
                                </a>
                                <a class="dropdown-item" href="{% url 'pycalorie:predict_from_image' %}">
                                    <span class="fas fa-camera me-2"></span> AI Prediction (Image)
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="{% url 'pycalorie:food_log_history' %}">
                                    <span class="fas fa-history me-2"></span> Food History
                                </a>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'dashboard:reports' %}" class="nav-link">
                                <span class="fas fa-chart-bar me-1"></span> Analytics
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'dashboard:profile' %}" class="nav-link">
                                <span class="fas fa-user-circle me-1"></span> Profile
                            </a>
                        </li>
                    {% else %}
                        <!-- Public Menu -->
                        <li class="nav-item">
                            <a href="/#features" class="nav-link">Features</a>
                        </li>
                        <li class="nav-item">
                            <a href="/#how-it-works" class="nav-link">How It Works</a>
                        </li>
                        <li class="nav-item">
                            <a href="/#about" class="nav-link">About</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
            
            <div class="d-flex align-items-center">              
                {% if request.user.is_authenticated %}
                    <span class="text-white me-3 d-none d-md-inline">
                        Hi, <strong>{{ request.user.first_name|default:request.user.username }}</strong>
                    </span>
                    <a href="{% url 'accounts:logout' %}" 
                       class="btn btn-sm btn-outline-white me-2">
                        <span class="fas fa-sign-out-alt me-1"></span> Logout
                    </a>            
                {% else %}
                    <a href="{% url 'accounts:login' %}" 
                       class="btn btn-sm btn-outline-white me-2">
                        <span class="fas fa-sign-in-alt me-1"></span> Sign In
                    </a>
                    <a href="{% url 'accounts:signup' %}" 
                       class="btn btn-sm btn-primary">
                        <span class="fas fa-user-plus me-1"></span> Sign Up
                    </a>
                {% endif %}
            </div>
        </div>
    </nav>
</header>